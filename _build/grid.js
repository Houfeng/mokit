/*csd*/define(function(require,exports,module){"use strict";var d=require("./utils"),a=require("./jquery");function b(h,i){var f=0;var g=0;d.each(h,function(j){if(this.indexOf("%")>-1){h[j]=i*parseInt(this)/100;}else{h[j]=parseInt(this);}if(isNaN(h[j])){f++;}else{g+=h[j];}});if(f>0){var e=(i-g)/f;d.each(h,function(j){if(isNaN(h[j])){h[j]=e;}});}return h;}function c(i){i=a(i);var p=i.attr("data-grid-scroll-x");var o=i.attr("data-grid-scroll-y");var k=parseInt(i.attr("data-grid-rectify-x")||"0");var l=parseInt(i.attr("data-grid-rectify-y")||"0");var q={width:((o&&i[0].scrollWidth>i[0].offsetWidth)?i[0].scrollWidth:i[0].offsetWidth)+k,height:((p&&i[0].scrollHeight>i[0].offsetHeight)?i[0].scrollHeight:i[0].offsetHeight)+l};var h=i.attr("data-grid-cols");var m=i.attr("data-grid-rows");if(!h||!m){return;}h=b(h.split(","),q.width);m=b(m.split(","),q.height);var g=null;var n=i.attr("data-grid-scope");if(n=="all"){g=i.find("[data-role~=cell]");}else{g=i.children("[data-role~=cell]");}for(var j=0;j<m.length;j++){for(var e=0;e<h.length;e++){var f=a(g[h.length*j+e]);if(h[e]==q.width){h[e]="100%";}f.outerWidth(h[e]).outerHeight(m[j]);}}}exports.use=function(f){var e=f.find("[data-role~=grid]");var g=f.attr("data-role");if(g&&d.contains(g,"grid")){e.splice(0,0,f[0]);}e.each(function(){c(this);}).resize(function(){c(this);});a(window).resize(function(){e.each(function(){c(this);});});};});