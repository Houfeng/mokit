/*csd*/define(function(require,exports,module){"use strict";var c=require("./event");var i=require("./utils");var h=function(m){var j=a.length-2;var l=a.length-1;var k=(a[j]==m);if(k){a.pop();}else{if(a[l]!=m){a.push(m);}}if(!e){exports.change.trigger(m,k,a.length);}e=false;};exports.change=c.create(exports,"change");var a=[d()];exports.history=function(){return a;};window.__history=a;function d(){if(location.hash){return location.hash.split("#")[1];}return null;}exports.getUri=d;function g(k,j){e=j;if(k==d()){return;}if(k&&k!=""){location.hash="#"+k;}else{location.hash=null;}}exports.setUri=g;function b(){var j=a.length-2;if(a[j]){g(a[j]);}}exports.back=b;function f(){a=[d()];}exports.reset=f;var e=false;c.create(window,"hashchange").bind(function(){h(d());});});