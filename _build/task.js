/*csd*/define(function(require,exports,module){"use strict";var a=require("class");var c=require("utils");var b=a.create({"taskList":[],"taskCount":0,"$init":function(d){var e=this;e.addMultiple(d);},"addMult":function(d){var e=this;c.each(d,function(g,f){e.add(g,f);});return e;},"addOne":function(e,d){var f=this;if(!e&&!d){return this;}if(e&&!d){d=e;e=f.taskList.length;}f.taskList.push({"name":e,"func":d});f.taskCount=f.taskList.length;f.result.length=f.taskCount;return f;},"add":function(d,e){var f=this;if(c.isString(d)||c.isFunction(d)){return f.addOne(d,e);}else{return f.addMult(d);}},"result":{},"execute":function(d,e){var f=this;if(f.taskList&&f.taskList.length>0){var g=f.taskList.shift();if(!g||!g.name||!g.func){f.taskCount--;return;}g.func(function(h){f.result[g.name]=h;g.done=true;f.taskCount--;if(f.once){f.once(g.name,h);}if(f.taskCount<1&&d){d(f.result);}if(e){f.execute(d,e);}});if(!e){f.execute(d,e);}}return f;},"one":function(d){this.once=d;return this;},"seq":function(d){return this.execute(d,true);},"end":function(d,e){return this.execute(d,e);}});exports.create=function(){return new b();};});