/*csd*/define(function(require,exports,module){"use strict";var a=require("class");var c=require("utils");var b=a.create({"taskList":[],"taskCount":0,"add":function(e,d){var f=this;if(!e&&!d){return this;}if(e&&!d){d=e;e=c.newGuid();}f.taskList.push({"name":e,"func":d});f.taskCount=f.taskList.length;return this;},"result":{},"execute":function(d,e){var f=this;if(f.taskList&&f.taskList.length>0){var g=f.taskList.shift();if(!g||!g.name||!g.func){f.taskCount--;return;}g.func(function(h){f.result[g.name]=h;f.taskCount--;if(f.once){f.once(g.name,h);}if(f.taskCount<1&&d){d(f.result);}if(e){f.execute(d,e);}});if(!e){f.execute(d,e);}}return;},"one":function(d){this.once=d;return this;},"seq":function(d){return this.execute(d,true);},"end":function(d){return this.execute(d,false);}});exports.create=function(){return new b();};});