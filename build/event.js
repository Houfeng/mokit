/*csd*/(function(b){"use strict";var c=null;var a=function(d){d=d||{};if(d.$monitor){return d.$monitor;}var e=d.$monitor={target:d};e.$monitor=e;e._addEvent=function(g,f,i){if(!c.isString(g)||!c.isFunction(f)){return;}var h=e.target;f.$delegate=f.$delegate||function(k){var j={originalEvent:k};c.each(k,function(n,m){if(c.isFunction(m)){j[n]=function(){m.apply(k,arguments);};}else{j[n]=m;}});arguments[0]=j;var l=f.apply(h,arguments);if(l===false){if(k.cancelBubble){k.cancelBubble=true;}if(k.preventDefault){k.preventDefault();}if(k.stopPropagation){k.stopPropagation();}}};if(h.addEventListener){h.addEventListener(g,f.$delegate,i);}else{if(h.attachEvent){h.attachEvent("on"+g,f.$delegate,i);}}return e;};e._removeEvent=function(h,g,j){if(!c.isString(h)){return;}var i=e.target;var f=g&&g.$delegate?g.$delegate:g;if(i.removeEventListener){i.removeEventListener(h,f,j);}else{if(i.detachEvent){i.detachEvent("on"+h,f,j);}}return e;};e._callEvent=function(j,h,f,g){if(!c.isString(j)){return;}var k=e.target;if(k.dispatchEvent){var i=document.createEvent("HTMLEvents");i.initEvent(j,f,g);c.copy(h,i);if(!c.isNull(i.target)){i.target=k;}k.dispatchEvent(i);}else{if(k.fireEvent){var i=document.createEventObject();c.copy(h,i);if(!c.isNull(i.target)){i.target=k;}k.fireEvent("on"+j,i);}}return e;};e._isNativeSupport=function(f){if(c.isNull(f)){return false;}return c.isFunction(f.addEventListener)||c.isFunction(f.attachEvent);};e.on=function(h,g){if(!c.isString(h)||!c.isFunction(g)){return;}e.lists=e.lists||{};e.lists[h]=e.lists[h]||[];e.lists[h].push(g);e._addEvent(h,g,false);var f=a.callers[h];if(!c.isNull(f)&&c.isFunction(f.on)){f.on(e,h,g,false);}return e;};e.off=function(i,g){e.lists=e.lists||{};if(c.isNull(i)){c.each(e.lists,function(l,k){e.off(l,g);});return e;}if(!c.isString(i)){return;}e._removeEvent(i,g,false);var h=e.lists[i];if(!c.isNull(h)){var j=[];c.each(h,function(k,l){if(!c.isNull(g)&&l!==g){j.push(l);}else{e._removeEvent(i,l,false);}});e.lists[i]=j;}var f=a.callers[i];if(!c.isNull(f)&&c.isFunction(f.off)){f.off(e,i,g,false);}return e;};e.call=function(h,f){if(!c.isString(h)){return;}var i=e.target;if(e._isNativeSupport(i)){e._callEvent(h,f);return e;}e.lists=e.lists||{};if(e.lists[h]){f.target=i;var g=e.lists[h];c.each(g,function(j,k){if(!c.isFunction(k)){return;}k.apply(i,[f]);});}return e;};return e;};a.use=function(d){d=d||{};var e=a(d);d.on=function(){e.on.apply(e,arguments);return d;};d.off=function(){e.off.apply(e,arguments);return d;};d.call=function(){e.call.apply(e,arguments);return d;};return e;};a.callers={};a.register=function(e,d){if(!e){return;}e=e.split(",");c.each(e,function(f,g){a.callers[g]=d;});};if(typeof define==="function"&&define.amd){define("$event",["utils"],function(d){c=d;return a;});}else{c=b.$utils;b.$event=a;}})((typeof exports==="undefined")?this:exports);