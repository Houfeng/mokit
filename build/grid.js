/*csd*/define(function(require,exports,module){"use strict";var e=require("./utils");var a=require("./jquery");var d=exports;function b(i,j){var g=0;var h=0;e.each(i,function(k){if(this.indexOf("%")>-1){i[k]=j*parseInt(this)/100;}else{i[k]=parseInt(this);}if(isNaN(i[k])){g++;}else{h+=i[k];}});if(g>0){var f=(j-h)/g;e.each(i,function(k){if(isNaN(i[k])){i[k]=f;}});}return i;}function c(j){j=a(j);var s=j.attr("data-grid-scroll-x");var q=j.attr("data-grid-scroll-y");var m=parseInt(j.attr("data-grid-rectify-x")||"0");var n=parseInt(j.attr("data-grid-rectify-y")||"0");var t={width:j.width(),height:j.height()};if(q&&j[0].scrollWidth>t.width){t.width=j[0].scrollWidth;}if(q&&j[0].scrollHeight>t.height){t.height=j[0].scrollHeight;}t.width+=m;t.height+=n;var i=j.attr("data-grid-cols");var o=j.attr("data-grid-rows");if(!i||!o){return;}i=b(i.split(","),t.width);o=b(o.split(","),t.height);var h=null;var p=j.attr("data-grid-scope");if(p=="all"){h=j.find("[data-role~=cell]");}else{h=j.children("[data-role~=cell]");}for(var l=0;l<o.length;l++){for(var f=0;f<i.length;f++){var g=a(h[i.length*l+f]);var u=i[f];u-=(parseInt(g.css("marginLeft"))+parseInt(g.css("marginRight")));u-=(parseInt(g.css("paddingLeft"))+parseInt(g.css("paddingRight")));u-=(parseInt(g.css("borderLeftWidth"))+parseInt(g.css("borderRightWidth")));var k=o[l];k-=(parseInt(g.css("marginTop"))+parseInt(g.css("marginBottom")));k-=(parseInt(g.css("paddingTop"))+parseInt(g.css("paddingBottom")));k-=(parseInt(g.css("borderTopWidth"))+parseInt(g.css("borderBottomWidth")));if(u==t.width){u="100%";}if(k==t.height){k="100%";}g.width(u).height(k);}}}d.use=function(g){var f=g.find("[data-role~=grid]");var h=g.attr("data-role");if(h&&e.contains(h,"grid")){f.splice(0,0,g[0]);}f.each(function(){c(this);}).resize(function(){c(this);});a(window).resize(function(){f.each(function(){c(this);});});};});