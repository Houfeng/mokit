/*csd*/define(function(require,exports,module){"use strict";var f=require("./utils"),e=require("./store"),c=require("./event");var d=e.dataCache["$language"]=exports.languages={};exports.languageChange=c.create(exports,"languagechange");var b=null;f.defineProperty(exports,"currentName",{get:function(){b=b||e.local.get("mokit://language/current-name");return b;},set:function(g){b=g;return b;}},true);var a=null;f.defineProperty(exports,"current",{get:function(){return a;},set:function(g){return a=g;}},true);f.defineProperty(exports,"defaultName",{get:function(){var g=(navigator.language||"").toLowerCase();if(d[g]){return g;}else{return Object.getOwnPropertyNames(d)[0];}}},true);exports.addLanguage=function(g,h){f.each(g,function(i){d[i]=(h&&h.resovleUri)?h.resovleUri(this):this;});};exports.setLanguage=function(i,g){if(!f.isString(i)){return;}var h=d[i];if(h){require(h,function(j){exports.current(j);exports.currentName(i);exports.languageChange.trigger(i,j);if(g){g(i,j);}});}else{console.error('language "'+i+'" not found.');}};exports.save=function(){return e.local.set("mokit://language/current-name",b);};exports.clear=function(){return e.local.set("mokit://language/current-name","");};});