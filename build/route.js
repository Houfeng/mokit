/*csd*/define(function(require,exports,module){"use strict";var b=require("./console"),e=require("./utils");var d=[];var c=new RegExp("{.+?}","gim");exports.getRoute=function(h){for(var f=0;f<d.length;f++){var k=d[f];k.matchExp.lastIndex=0;if(k.matchExp.test(h)){k.routeData={};k.matchExp.lastIndex=0;var m=h.match(k.matchExp);for(var g=0;g<k.routeKeys.length;g++){var l=RegExp["$"+(g+1)];if(l){k.routeData[k.routeKeys[g]]=l;}}return e.clone(k);}}};var a=function(h){if(h&&h.pattern&&h.target){c.lastIndex=0;var g="^"+h.pattern.replace(c,"([^\\/]+)")+"$";h.matchExp=new RegExp(g,"gim");h.routeKeys=h.pattern.match(c)||[];for(var f=0;f<h.routeKeys.length;f++){h.routeKeys[f]=h.routeKeys[f].replace("{","").replace("}","");}d.push(h);}};exports.addRoute=function(f,g){if(!e.isArray(f)){f=[f];}e.each(f,function(h){this.target=(g&&g.resovleUri)?g.resovleUri(this.target):this.target;a(this);});};});