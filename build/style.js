/*csd*/define(function(require,exports,module){"use strict";var a=require("./jquery"),f=require("./utils"),d=require("./store"),c=require("./event");var e=d.dataCache["$style"]={};exports.styleChange=c.create(exports,"styleChange");exports.storeKey="mokit://style/current-name";var b=null;f.defineProperty(exports,"currentName",{get:function(){b=b||d.local.get("style:"+exports.storeKey);return b;},set:function(g){b=g;return b;}},true);f.defineProperty(exports,"defaultName",{get:function(){return Object.getOwnPropertyNames(e)[0];}},true);exports.addStyle=function(h,g){f.each(h,function(i){e[i]=(g&&g.resovleUri)?g.resovleUri(this):this;});};exports.setStyle=function(h,g){if(!f.isString(h)){return g();}if(e[h]){module.unload(e[exports.currentName()]);require(e[h],function(i){exports.currentName(h);exports.styleChange.trigger(h,i);f.async(function(){if(g){g(h,i);}},45);});}else{console.error('style "'+h+'" not found.');}};exports.save=function(){return d.local.set(exports.storeKey,b);};exports.clear=function(){return d.local.set(exports.storeKey,"");};});