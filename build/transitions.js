/*csd*/define(function(require,exports,module){"use strict";var a=require("./jquery"),j=require("./modernizr"),o=require("./utils"),i=require("./mask");var n=j.cssanimations,f=false,g=false;var e={"WebkitAnimation":"webkitAnimationEnd","OAnimation":"oAnimationEnd","msAnimation":"MSAnimationEnd","animation":"animationend"};var d=e[j.prefixed("animation")];var c=false;exports.isAnimating=function(){return c;};var l=function(p,q){if(p){p.attr("class",p.data("originalClassList"));}if(q){q.attr("class",q.data("originalClassList")+" ui-view-current");}};var m=function(p,q){if(p){p.data("originalClassList",p.attr("class")||"");}if(q){q.data("originalClassList",q.attr("class")||"");}};var k=function(q,r,p){f=false;g=false;l(q,r);if(p){p();}};var h=function(p){var r,q;switch(p){case 1:r="ui-view-moveToLeft";q="ui-view-moveFromRight";break;case 2:r="ui-view-moveToRight";q="ui-view-moveFromLeft";break;case 3:r="ui-view-moveToTop";q="ui-view-moveFromBottom";break;case 4:r="ui-view-moveToBottom";q="ui-view-moveFromTop";break;case 5:r="ui-view-fade";q="ui-view-moveFromRight ui-view-ontop";break;case 6:r="ui-view-fade";q="ui-view-moveFromLeft ui-view-ontop";break;case 7:r="ui-view-fade";q="ui-view-moveFromBottom ui-view-ontop";break;case 8:r="ui-view-fade";q="ui-view-moveFromTop ui-view-ontop";break;case 9:r="ui-view-moveToLeftFade";q="ui-view-moveFromRightFade";break;case 10:r="ui-view-moveToRightFade";q="ui-view-moveFromLeftFade";break;case 11:r="ui-view-moveToTopFade";q="ui-view-moveFromBottomFade";break;case 12:r="ui-view-moveToBottomFade";q="ui-view-moveFromTopFade";break;case 13:r="ui-view-moveToLeftEasing ui-view-ontop";q="ui-view-moveFromRight";break;case 14:r="ui-view-moveToRightEasing ui-view-ontop";q="ui-view-moveFromLeft";break;case 15:r="ui-view-moveToTopEasing ui-view-ontop";q="ui-view-moveFromBottom";break;case 16:r="ui-view-moveToBottomEasing ui-view-ontop";q="ui-view-moveFromTop";break;case 17:r="ui-view-scaleDown";q="ui-view-moveFromRight ui-view-ontop";break;case 18:r="ui-view-scaleDown";q="ui-view-moveFromLeft ui-view-ontop";break;case 19:r="ui-view-scaleDown";q="ui-view-moveFromBottom ui-view-ontop";break;case 20:r="ui-view-scaleDown";q="ui-view-moveFromTop ui-view-ontop";break;case 21:r="ui-view-scaleDown";q="ui-view-scaleUpDown ui-view-delay300";break;case 22:r="ui-view-scaleDownUp";q="ui-view-scaleUp ui-view-delay300";break;case 23:r="ui-view-moveToLeft ui-view-ontop";q="ui-view-scaleUp";break;case 24:r="ui-view-moveToRight ui-view-ontop";q="ui-view-scaleUp";break;case 25:r="ui-view-moveToTop ui-view-ontop";q="ui-view-scaleUp";break;case 26:r="ui-view-moveToBottom ui-view-ontop";q="ui-view-scaleUp";break;case 27:r="ui-view-scaleDownCenter";q="ui-view-scaleUpCenter ui-view-delay400";break;case 28:r="ui-view-rotateRightSideFirst";q="ui-view-moveFromRight ui-view-delay200 ui-view-ontop";break;case 29:r="ui-view-rotateLeftSideFirst";q="ui-view-moveFromLeft ui-view-delay200 ui-view-ontop";break;case 30:r="ui-view-rotateTopSideFirst";q="ui-view-moveFromTop ui-view-delay200 ui-view-ontop";break;case 31:r="ui-view-rotateBottomSideFirst";q="ui-view-moveFromBottom ui-view-delay200 ui-view-ontop";break;case 32:r="ui-view-flipOutRight";q="ui-view-flipInLeft ui-view-delay500";break;case 33:r="ui-view-flipOutLeft";q="ui-view-flipInRight ui-view-delay500";break;case 34:r="ui-view-flipOutTop";q="ui-view-flipInBottom ui-view-delay500";break;case 35:r="ui-view-flipOutBottom";q="ui-view-flipInTop ui-view-delay500";break;case 36:r="ui-view-rotateFall ui-view-ontop";q="ui-view-scaleUp";break;case 37:r="ui-view-rotateOutNewspaper";q="ui-view-rotateInNewspaper ui-view-delay500";break;case 38:r="ui-view-rotatePushLeft";q="ui-view-moveFromRight";break;case 39:r="ui-view-rotatePushRight";q="ui-view-moveFromLeft";break;case 40:r="ui-view-rotatePushTop";q="ui-view-moveFromBottom";break;case 41:r="ui-view-rotatePushBottom";q="ui-view-moveFromTop";break;case 42:r="ui-view-rotatePushLeft";q="ui-view-rotatePullRight ui-view-delay180";break;case 43:r="ui-view-rotatePushRight";q="ui-view-rotatePullLeft ui-view-delay180";break;case 44:r="ui-view-rotatePushTop";q="ui-view-rotatePullBottom ui-view-delay180";break;case 45:r="ui-view-rotatePushBottom";q="ui-view-rotatePullTop ui-view-delay180";break;case 46:r="ui-view-rotateFoldLeft";q="ui-view-moveFromRightFade";break;case 47:r="ui-view-rotateFoldRight";q="ui-view-moveFromLeftFade";break;case 48:r="ui-view-rotateFoldTop";q="ui-view-moveFromBottomFade";break;case 49:r="ui-view-rotateFoldBottom";q="ui-view-moveFromTopFade";break;case 50:r="ui-view-moveToRightFade";q="ui-view-rotateUnfoldLeft";break;case 51:r="ui-view-moveToLeftFade";q="ui-view-rotateUnfoldRight";break;case 52:r="ui-view-moveToBottomFade";q="ui-view-rotateUnfoldTop";break;case 53:r="ui-view-moveToTopFade";q="ui-view-rotateUnfoldBottom";break;case 54:r="ui-view-rotateRoomLeftOut ui-view-ontop";q="ui-view-rotateRoomLeftIn";break;case 55:r="ui-view-rotateRoomRightOut ui-view-ontop";q="ui-view-rotateRoomRightIn";break;case 56:r="ui-view-rotateRoomTopOut ui-view-ontop";q="ui-view-rotateRoomTopIn";break;case 57:r="ui-view-rotateRoomBottomOut ui-view-ontop";q="ui-view-rotateRoomBottomIn";break;case 58:r="ui-view-rotateCubeLeftOut ui-view-ontop";q="ui-view-rotateCubeLeftIn";break;case 59:r="ui-view-rotateCubeRightOut ui-view-ontop";q="ui-view-rotateCubeRightIn";break;case 60:r="ui-view-rotateCubeTopOut ui-view-ontop";q="ui-view-rotateCubeTopIn";break;case 61:r="ui-view-rotateCubeBottomOut ui-view-ontop";q="ui-view-rotateCubeBottomIn";break;case 62:r="ui-view-rotateCarouselLeftOut ui-view-ontop";q="ui-view-rotateCarouselLeftIn";break;case 63:r="ui-view-rotateCarouselRightOut ui-view-ontop";q="ui-view-rotateCarouselRightIn";break;case 64:r="ui-view-rotateCarouselTopOut ui-view-ontop";q="ui-view-rotateCarouselTopIn";break;case 65:r="ui-view-rotateCarouselBottomOut ui-view-ontop";q="ui-view-rotateCarouselBottomIn";break;case 66:r="ui-view-rotateSidesOut";q="ui-view-rotateSidesIn ui-view-delay200";break;case 67:r="ui-view-rotateSlideOut";q="ui-view-rotateSlideIn";break;case 68:r="ui-view-fade ui-view-ontop";q="ui-view-fade ui-view-delay200";break;}return{"inClass":q,"outClass":r};};var b=function(s,t,p,r){if(!s||!t||!p||p==0){setTimeout(function(){k(null,null,r);},13);return;}m(s,t);t.addClass("ui-view-current");var q=h(p);s.addClass(q.outClass).on(d,function(){s.off(d);f=true;if(g){k(s,t,r);}});t.addClass(q.inClass).on(d,function(){t.off(d);g=true;if(f){k(s,t,r);}});if(!n){k(s,t,r);}};exports.change=function(r,s,p,q,t){if(c){return;}c=true;i.begin(t);r=r.ui||r;s=s.ui||s;b(r,s,p,function(){i.end(t);if(q){q();}c=false;});};});