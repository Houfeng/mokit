/*csd*//**
 *
 * EMS(IMP) v0.9.9
 * Easy Module System: 简洁、易用的模块系统
 * 作者：侯锋
 * 邮箱：admin@xhou.net
 * 网站：http://houfeng.net , http://houfeng.net/ems
 *
 * ems 全称为 "Easy Module System" 他还有一个别名叫: "imp";
 * ems 作为 "EMD" 的实现标准范本; 完全符合 "EMD规范";
 *
 **/
(function(E){function x(M){return(M===null)||(typeof M==="undefined");}function w(M){return(M instanceof Array)||(M&&M.length&&M[0]);}function n(P,M){if(!P||!M){return;}if(w(P)){var Q=P.length;for(var N=0;N<Q;N++){if(x(P[N])){continue;}var R=M.call(P[N],N,P[N]);if(!x(R)){return R;}}}else{for(var O in P){if(x(P[O])){continue;}var R=M.call(P[O],O,P[O]);if(!x(R)){return R;}}}}function I(M,N){return M&&N&&M.indexOf(N)==0;}function h(M,N){return M&&N&&M.indexOf(N)>-1;}function j(N){var M=document.createElement("script");M.src=N;M.async=true;M.defer=true;M.type="text/javascript";return M;}function k(N){var M=document.createElement("link");M.href=N;M.type="text/css";M.rel="stylesheet";return M;}function t(){return document.getElementsByTagName("script");}function r(){var M=t();return n(M,function(){return this.getAttribute("data-main");});}function q(){var M=t();return n(M,function(){if(this.readyState==="interactive"){return this;}});}var o=null;function e(M){if(!o){o=document.getElementsByTagName("head");o=o&&o[0]?o[0]:document.body;o=o||o.parent;}o.appendChild(M);}function f(M,O,N){if(M.addEventListener){M.addEventListener(O,N);}else{if(M.attachEvent){M.attachEvent("on"+O,N);}}}function g(M,N){if(!M||!N){return;}if((typeof HTMLLinkElement!=="undefined")&&(M instanceof HTMLLinkElement)){N.apply(M,[{}]);return;}var O=M.attachEvent?"readystatechange":"load";f(M,O,function(){var P=M.readyState||"loaded";if(P=="loaded"||P=="interactive"||P=="complete"){N.apply(M,arguments||[]);}});}var D={"require":{loaded:true,exports:"require"},"exports":{loaded:true,exports:"exports"},"module":{loaded:true,exports:"module"}};function H(N,M){if(!D[N]){return;}D[N].loading=true;D[N].deps=M.moduleDeps;D[N].declare=M.moduleDeclare;D[N].declareDeps=M.declareDeps;M=null;D[N].require(D[N].deps,function(){var O=arguments;setTimeout(function(){D[N].require(D[N].declareDeps,function(){setTimeout(function(){if(D[N].declare){var P=[];for(var Q=0;Q<O.length;Q++){if(O[Q]=="require"){O[Q]=D[N].require;}if(O[Q]=="exports"){O[Q]=D[N].exports;}if(O[Q]=="module"){O[Q]=D[N];}P.push(O[Q]);}P.push(D[N].require);P.push(D[N].exports);P.push(D[N]);var R=D[N].declare.apply(D[N],P);D[N].exports=R||D[N].exports;}n(D[N].loadCallbacks,function(){this(D[N].exports);});if(E.onLoad){E.onLoad(D[N]);}D[N].loaded=true;D[N].loadCallbacks=null;},0);});},0);});}function a(N,M){if(D[N]==null){D[N]=new C(N);}if(D[N].loaded&&M){M(D[N].exports);return D[N].exports;}if(D[N].loadCallbacks!=null){D[N].loadCallbacks.push(M);return;}D[N].loadCallbacks=[];D[N].loadCallbacks.push(M);D[N].element=h(N,".css")?k(N):j(N);g(D[N].element,function(){if(!D[N].loaded&&!D[N].loading){var O=l.shift()||{};H(N,O);}});e(D[N].element);}function z(P,M){if(!h(P,"!")){return a(P,M);}else{var O=P.lastIndexOf("!");var Q=P.substring(0,O);var R=P.substring(O+1);if(D[R]&&D[R].loaded){var N=D[R].exports;if(M){M(N);}return N;}return z(Q,function(T){if(!T||!T.load){return;}var S=function(U){D[R]={exports:U,loaded:true};if(M){M(U);}};S.fromText=S;S.error=S;T.load(R,D[Q].require,S,E.config());});}}E.load=function(O,N,M){var R=m(O,M);var P=[];var Q=0;if(R&&R.length>0){n(R,function(S,T){z(T,function(){Q+=1;if(Q<R.length){return;}P=s(R)||P;if(N){N.apply(P,P);}});});}else{if(N){N.apply(P,P);}}return P&&P.length==1?P[0]:P;};E.unload=function(N,M){var O=m(N,M);n(O,function(P,Q){if(D[Q]){D[Q].element.parentNode.removeChild(D[Q].element);D[Q].exports=null;D[Q].loading=null;D[Q].deps=null;D[Q].declare=null;D[Q].declareDeps=null;D[Q].element=null;D[Q]=null;}});};function s(N){var M=[];n(N,function(O,P){var Q=P.split("!")[1];if(P!==null&&D[P]){M.push(D[P].exports);}if(Q!=null&&D[Q]){M.push(D[Q].exports);}});return M;}function y(M){return(M=="require"||M=="exports"||M=="module");}function K(O){if(I(O,"http://")||I(O,"https://")||I(O,"file://")){return true;}else{var M=/^\S+?:\//ig;var N=/^\S+?:\\/ig;return M.test(O)||N.test(O);}}function J(M){return I(M,"/")||I(M,"\\");}function c(P,N){if(x(P)||x(N)||K(P)||J(P)||y(P)){return P;}N=N.split("?")[0].split("#")[0];var M=N.substring(0,N.lastIndexOf("/"));var R=P.split("#")[0].split("/");var Q=P.split("#")[1];var O=M.length>0?M.split("/"):[];n(R,function(S,T){if(T==".."){O.pop();}else{if(T=="."){}else{O.push(T);}}});return O.join("/")+(Q?"#"+Q:"");}function G(M,N,O){if(x(M)||x(N)){return M;}var Q=M.split("!");var P=[];n(Q,function(R,S){var T=d[S]||S;T=v(T);T=c(T,N);if(!O){T=u(T);}P.push(T);});return P.join("!");}function u(N){if(y(N)){return N;}var M=N.substring(N.lastIndexOf("/")+1,N.length);if(N!=""&&!h(N,"?")&&!h(N,"#")&&M!=""&&!h(M,".")){N+=(p||".js");}return N;}function v(P){var M=P.indexOf("/");if(M<0){M=P.length;}var N=P.substr(0,M);var O=P.substr(M+1,P.length);n(F,function(Q,R){if(N==R.name){N=R.location||N;O=O||R.main||"";if(N[N.length-1]=="/"){N=N.substring(0,N.lastIndexOf("/"));}if(O[0]=="/"){O=O.substring(1,O.length);}P=N+"/"+O;}});return P;}function L(M){if(M==null){return[];}if((typeof M)=="string"){M=[M];}return M;}function m(O,N){N=N||location.href;O=L(O);var M=[];n(O,function(Q,P){var R=G(P,N);M.push(R);});return M;}function C(O){var N=this;var M=N.uri=N.id=O||"/";N.resovleUri=function(P,Q,R){return G(P,Q||M,R);};N.require=function(Q,P){return E.load(Q,P,O);};N.unrequire=function(P){return E.unload(P,O);};N.require.toUrl=N.require.resovleUri=function(P,Q,R){return N.resovleUri(P,Q,R);};N.require.defined=function(P){return D[P].loaded;};N.require.specified=function(P){return D[P].loaded||D[P].loadCallbacks!=null;};this.exports={};this.declare=null;this.deps=null;this.loaded=false;}var l=[];function i(O,N,M){var P=null;if(N&&M){P={moduleDeps:N,moduleDeclare:M};}else{if(O&&N){P={moduleDeps:O,moduleDeclare:N};}else{if(O&&M){P={moduleDeps:N,moduleDeclare:M};}else{if(O){P={moduleDeclare:O};}}}}return P;}function B(P){P=P.replace(/\/\*[\w\W]*?\*\//gm,";").replace(/^\/\/.*/gi,";");var O=[];var N=/require\s*\(\s*[\"|\'](.+?)[\"|\']\s*\)\s*[;|,|\n|\}|\{|\[|\]|\.]/gm;var M=null;while(M=N.exec(P)){if(M&&M[1]&&!h(M[1],'"')&&!h(M[1],"'")){O.push(M[1]);}}return O;}E.define=function(O,N,M){var P=i(O,N,M);if(P){if(typeof P.moduleDeclare!="function"){var S=P.moduleDeclare;P.moduleDeclare=function(){return S;};}var Q=B(P.moduleDeclare.toString());if(Q&&Q.length>0){P.declareDeps=Q;}var R=q();if(R){var T=R.getAttribute("src");H(T,P);}else{l.push(P);}}};E.config=function(M){if(M===null){return b;}M=M||{};M.alias=M.alias||M.paths||{};n(M.alias,function(N,O){d[N]=O;});M.packages=M.packages||[];n(M.packages,function(N,O){O.name=O.name||N;F[O.name]=O;});p=p||M.extension;b=M;};var b={};var d={};var p=".js";var F={};E.resovleUri=function(N,M){return G(N,M||location.href);};E.alias=d;E.packages=F;E.modules=D;E.define.amd=E.define.emd=E.define.eamd={};if(window){window.define=E.define;}var A=r();if(A&&A!=""){E.load(A);}})(this.ems=this.imp={});